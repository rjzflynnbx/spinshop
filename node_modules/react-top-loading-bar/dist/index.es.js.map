{"version":3,"file":"index.es.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// @ts-ignore\nimport styles from './styles.css';\n\ntype IState = {\n  show: boolean;\n  full: boolean;\n  progress: number;\n  wait: boolean;\n  interval: number;\n};\n\ntype IProps = {\n  progress?: number;\n  color?: string;\n  background?: string;\n  height?: number;\n  onLoaderFinished?: Function;\n  onProgressChange?: Function;\n  className?: string;\n  onRef?: Function;\n};\n\nclass LoadingBar extends Component<IProps, IState> {\n  state = {\n    show: true,\n    full: false,\n    progress: 0,\n    wait: false,\n    interval: null\n  };\n  static propTypes = {\n    progress: PropTypes.number,\n    color: PropTypes.string,\n    background: PropTypes.string,\n    height: PropTypes.number,\n    onLoaderFinished: PropTypes.func,\n    onProgressChange: PropTypes.func,\n    className: PropTypes.string,\n    onRef: PropTypes.func\n  };\n\n  static defaultProps = {\n    progress: 0,\n    color: '#f11946',\n    height: 3,\n    className: '',\n    background: ''\n  };\n\n  private mounted: boolean;\n\n  public add = (value: number) => {\n    this.setState({ progress: this.state.progress + value }, () => {\n      this.onProgressChange();\n    });\n  };\n\n  private onProgressChange = () => {\n    if (this.props.onProgressChange)\n      this.props.onProgressChange(this.state.progress);\n\n    this.checkIfFull();\n  };\n\n  public decrease = (value: number) => {\n    this.setState({ progress: this.state.progress - value }, () => {\n      this.onProgressChange();\n    });\n  };\n\n  private randomInt(low: number, high: number) {\n    return Math.floor(Math.random() * (high - low) + low);\n  }\n\n  /** @deprecated this method contains a typo, use continuousStart */\n  public continousStart = (startingValue: number) => {\n    if (this.state.interval) {\n      clearInterval(this.state.interval);\n    }\n\n    const random = startingValue || this.randomInt(20, 30);\n    this.setState({ progress: random });\n\n    const interval = setInterval(() => {\n      if (this.state.progress < 90) {\n        const random = this.randomInt(2, 10);\n        if (!this.mounted) return false;\n        this.setState({ progress: this.state.progress + random }, () => {\n          this.onProgressChange();\n        });\n      } else {\n        clearInterval(interval);\n      }\n    }, 1000);\n\n    this.setState({ interval });\n  };\n\n  public continuousStart = (startingValue: number) => {\n    if (this.state.interval) {\n      clearInterval(this.state.interval);\n    }\n    const random = startingValue || this.randomInt(20, 30);\n    this.setState({ progress: random });\n\n    const interval = setInterval(() => {\n      if (this.state.progress < 90) {\n        const random = this.randomInt(2, 10);\n        if (!this.mounted) return false;\n        this.setState({ progress: this.state.progress + random }, () => {\n          this.onProgressChange();\n        });\n      } else {\n        clearInterval(interval);\n      }\n    }, 1000);\n    this.setState({ interval });\n  };\n\n  public staticStart = (startingValue: number) => {\n    if (this.state.interval) {\n      clearInterval(this.state.interval);\n    }\n    const random = startingValue || this.randomInt(30, 50);\n\n    this.setState({ progress: random, interval: null }, () => {\n      this.onProgressChange();\n    });\n  };\n\n  public complete = () => {\n    if (this.state.interval) {\n      clearInterval(this.state.interval);\n    }\n    this.setState({ progress: 100, interval: null }, () => {\n      this.onProgressChange();\n    });\n  };\n\n  private onLoaderFinished = () => {\n    if (this.props.onLoaderFinished) this.props.onLoaderFinished();\n\n    this.setState({ progress: 0 }, () => {\n      this.onProgressChange();\n    });\n  };\n\n  render() {\n    const { className, height } = this.props;\n    const { show, full } = this.state;\n    return (\n      <div style={{ height }}>\n        {show ? (\n          <div\n            className={\n              styles['loading-bar'] +\n              ' ' +\n              (className || '') +\n              ' ' +\n              (full ? styles['loading-bar-full'] : '')\n            }\n            style={this.barStyle()}\n          />\n        ) : null}\n      </div>\n    );\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: IProps) {\n    // Watching Progress Changes\n    if (nextProps.progress !== this.props.progress) {\n      this.setState({ progress: nextProps.progress }, () => {\n        if (this.props.onProgressChange != null) {\n          this.props.onProgressChange();\n        }\n        this.checkIfFull();\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    if (this.props.onRef) this.props.onRef(this);\n\n    if (this.state.progress !== this.props.progress) {\n      this.setState({ progress: this.props.progress });\n    }\n  }\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.props.onRef) this.props.onRef(undefined);\n  }\n  // Check whether the progress is full\n  private checkIfFull = () => {\n    if (!this.mounted) return false;\n\n    if (this.state.progress >= 100) {\n      // Prevent new progress change\n      this.setState({ wait: true });\n\n      // Start animate it\n      setTimeout(() => {\n        if (!this.mounted) return false;\n        // animate when element removed\n        this.setState({\n          full: true\n        });\n\n        setTimeout(() => {\n          if (!this.mounted) return false;\n          this.setState({\n            // remove bar element\n            show: false,\n            progress: 0,\n            wait: false\n          });\n\n          setTimeout(() => {\n            if (!this.mounted) return false;\n            this.setState({\n              // Show Bar\n              full: false,\n              show: true\n            });\n            this.onLoaderFinished();\n          });\n\n          // Duration to Waiting for hiding animation\n        }, 250);\n\n        // Duration is depend on css animation-duration of loading-bar\n      }, 700);\n    }\n  };\n\n  // apply width style to our element as inline style\n  private barStyle() {\n    // When loading bar still in progress\n    const { color, background } = this.props;\n    if (background || background !== '') {\n      console.warn(\n        \"react-top-loading-bar: Please don't use background property as a property since it's deprecated. Please use 'color' since it now haves the same function as background.\"\n      );\n    }\n\n    if (!this.state.wait) {\n      return {\n        width: `${this.state.progress}%`,\n        background: background || color\n      };\n    } else {\n      return { width: '100%', background: background || color };\n    }\n  }\n}\n\nexport default LoadingBar;\n"],"names":["value","setState","progress","_this","state","onProgressChange","props","checkIfFull","startingValue","interval","random","randomInt","setInterval","random_1","mounted","random_2","onLoaderFinished","wait","low","high","Math","floor","_a","className","height","_b","show","full","styles","barStyle","nextProps","onRef","undefined","color","background","warn","width","PropTypes","number","string","func","Component"],"mappings":"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"}