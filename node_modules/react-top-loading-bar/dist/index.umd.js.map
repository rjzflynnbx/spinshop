{"version":3,"file":"index.umd.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// @ts-ignore\nimport styles from './styles.css';\n\ntype IState = {\n  show: boolean;\n  full: boolean;\n  progress: number;\n  wait: boolean;\n  interval: number;\n};\n\ntype IProps = {\n  progress?: number;\n  color?: string;\n  background?: string;\n  height?: number;\n  onLoaderFinished?: Function;\n  onProgressChange?: Function;\n  className?: string;\n  onRef?: Function;\n};\n\nclass LoadingBar extends Component<IProps, IState> {\n  state = {\n    show: true,\n    full: false,\n    progress: 0,\n    wait: false,\n    interval: null\n  };\n  static propTypes = {\n    progress: PropTypes.number,\n    color: PropTypes.string,\n    background: PropTypes.string,\n    height: PropTypes.number,\n    onLoaderFinished: PropTypes.func,\n    onProgressChange: PropTypes.func,\n    className: PropTypes.string,\n    onRef: PropTypes.func\n  };\n\n  static defaultProps = {\n    progress: 0,\n    color: '#f11946',\n    height: 3,\n    className: '',\n    background: ''\n  };\n\n  private mounted: boolean;\n\n  public add = (value: number) => {\n    this.setState({ progress: this.state.progress + value }, () => {\n      this.onProgressChange();\n    });\n  };\n\n  private onProgressChange = () => {\n    if (this.props.onProgressChange)\n      this.props.onProgressChange(this.state.progress);\n\n    this.checkIfFull();\n  };\n\n  public decrease = (value: number) => {\n    this.setState({ progress: this.state.progress - value }, () => {\n      this.onProgressChange();\n    });\n  };\n\n  private randomInt(low: number, high: number) {\n    return Math.floor(Math.random() * (high - low) + low);\n  }\n\n  /** @deprecated this method contains a typo, use continuousStart */\n  public continousStart = (startingValue: number) => {\n    if (this.state.interval) {\n      clearInterval(this.state.interval);\n    }\n\n    const random = startingValue || this.randomInt(20, 30);\n    this.setState({ progress: random });\n\n    const interval = setInterval(() => {\n      if (this.state.progress < 90) {\n        const random = this.randomInt(2, 10);\n        if (!this.mounted) return false;\n        this.setState({ progress: this.state.progress + random }, () => {\n          this.onProgressChange();\n        });\n      } else {\n        clearInterval(interval);\n      }\n    }, 1000);\n\n    this.setState({ interval });\n  };\n\n  public continuousStart = (startingValue: number) => {\n    if (this.state.interval) {\n      clearInterval(this.state.interval);\n    }\n    const random = startingValue || this.randomInt(20, 30);\n    this.setState({ progress: random });\n\n    const interval = setInterval(() => {\n      if (this.state.progress < 90) {\n        const random = this.randomInt(2, 10);\n        if (!this.mounted) return false;\n        this.setState({ progress: this.state.progress + random }, () => {\n          this.onProgressChange();\n        });\n      } else {\n        clearInterval(interval);\n      }\n    }, 1000);\n    this.setState({ interval });\n  };\n\n  public staticStart = (startingValue: number) => {\n    if (this.state.interval) {\n      clearInterval(this.state.interval);\n    }\n    const random = startingValue || this.randomInt(30, 50);\n\n    this.setState({ progress: random, interval: null }, () => {\n      this.onProgressChange();\n    });\n  };\n\n  public complete = () => {\n    if (this.state.interval) {\n      clearInterval(this.state.interval);\n    }\n    this.setState({ progress: 100, interval: null }, () => {\n      this.onProgressChange();\n    });\n  };\n\n  private onLoaderFinished = () => {\n    if (this.props.onLoaderFinished) this.props.onLoaderFinished();\n\n    this.setState({ progress: 0 }, () => {\n      this.onProgressChange();\n    });\n  };\n\n  render() {\n    const { className, height } = this.props;\n    const { show, full } = this.state;\n    return (\n      <div style={{ height }}>\n        {show ? (\n          <div\n            className={\n              styles['loading-bar'] +\n              ' ' +\n              (className || '') +\n              ' ' +\n              (full ? styles['loading-bar-full'] : '')\n            }\n            style={this.barStyle()}\n          />\n        ) : null}\n      </div>\n    );\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: IProps) {\n    // Watching Progress Changes\n    if (nextProps.progress !== this.props.progress) {\n      this.setState({ progress: nextProps.progress }, () => {\n        if (this.props.onProgressChange != null) {\n          this.props.onProgressChange();\n        }\n        this.checkIfFull();\n      });\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    if (this.props.onRef) this.props.onRef(this);\n\n    if (this.state.progress !== this.props.progress) {\n      this.setState({ progress: this.props.progress });\n    }\n  }\n  componentWillUnmount() {\n    this.mounted = false;\n    if (this.props.onRef) this.props.onRef(undefined);\n  }\n  // Check whether the progress is full\n  private checkIfFull = () => {\n    if (!this.mounted) return false;\n\n    if (this.state.progress >= 100) {\n      // Prevent new progress change\n      this.setState({ wait: true });\n\n      // Start animate it\n      setTimeout(() => {\n        if (!this.mounted) return false;\n        // animate when element removed\n        this.setState({\n          full: true\n        });\n\n        setTimeout(() => {\n          if (!this.mounted) return false;\n          this.setState({\n            // remove bar element\n            show: false,\n            progress: 0,\n            wait: false\n          });\n\n          setTimeout(() => {\n            if (!this.mounted) return false;\n            this.setState({\n              // Show Bar\n              full: false,\n              show: true\n            });\n            this.onLoaderFinished();\n          });\n\n          // Duration to Waiting for hiding animation\n        }, 250);\n\n        // Duration is depend on css animation-duration of loading-bar\n      }, 700);\n    }\n  };\n\n  // apply width style to our element as inline style\n  private barStyle() {\n    // When loading bar still in progress\n    const { color, background } = this.props;\n    if (background || background !== '') {\n      console.warn(\n        \"react-top-loading-bar: Please don't use background property as a property since it's deprecated. Please use 'color' since it now haves the same function as background.\"\n      );\n    }\n\n    if (!this.state.wait) {\n      return {\n        width: `${this.state.progress}%`,\n        background: background || color\n      };\n    } else {\n      return { width: '100%', background: background || color };\n    }\n  }\n}\n\nexport default LoadingBar;\n"],"names":["tslib_1","_this","show","full","progress","wait","interval","value","setState","state","onProgressChange","props","checkIfFull","startingValue","clearInterval","random","randomInt","setInterval","random_1","mounted","random_2","onLoaderFinished","setTimeout","LoadingBar","low","high","Math","floor","_a","className","height","_b","React","styles","barStyle","nextProps","onRef","undefined","color","background","console","warn","width","PropTypes","number","string","func","Component"],"mappings":"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"}